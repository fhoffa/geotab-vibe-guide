{
  "name": "F1 Operations Hub",
  "supportEmail": "support@geotab.com",
  "version": "2.1",
  "items": [{
    "url": "f1-hub.html",
    "path": "ActivityLink",
    "menuName": {
      "en": "F1 Operations Hub"
    }
  }],
  "files": {
    "f1-hub.html": "<!DOCTYPE html><html><head><meta charset='utf-8'></head><body style='margin:0;padding:24px;font-family:system-ui,sans-serif;background:#f5f5f5;'><div style='max-width:1200px;margin:0 auto;'><div style='display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;'><h1 style='margin:0;font-size:24px;color:#1a1a1a;'>F1 Operations Hub</h1><div id='status' style='font-size:14px;color:#666;'>Initializing...</div></div><div style='display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px;'><div style='background:#fff;padding:20px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1);'><div style='font-size:14px;color:#666;margin-bottom:8px;'>Active Breaches</div><div id='breachCount' style='font-size:36px;font-weight:bold;color:#dc2626;'>0</div></div><div style='background:#fff;padding:20px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1);'><div style='font-size:14px;color:#666;margin-bottom:8px;'>Race Countdown</div><div id='countdown' style='font-size:24px;font-weight:bold;color:#1a1a1a;font-variant-numeric:tabular-nums;font-family:ui-monospace,monospace;'><span id='cd-d'>000</span>d <span id='cd-h'>00</span>h <span id='cd-m'>00</span>m <span id='cd-s'>00</span>s</div><div style='font-size:12px;color:#666;margin-top:4px;'>Nov 21, 2026</div></div><div style='background:#fff;padding:20px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1);'><div style='font-size:14px;color:#666;margin-bottom:8px;'>Zones Monitored</div><div style='font-size:36px;font-weight:bold;color:#059669;'>10</div></div></div><div style='background:#fff;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1);overflow:hidden;margin-bottom:24px;'><table style='width:100%;border-collapse:collapse;'><thead><tr style='background:#f9fafb;'><th style='padding:12px 16px;text-align:left;font-size:13px;color:#666;border-bottom:1px solid #e5e7eb;'>Asset</th><th style='padding:12px 16px;text-align:left;font-size:13px;color:#666;border-bottom:1px solid #e5e7eb;'>Breaches</th><th style='padding:12px 16px;text-align:right;font-size:13px;color:#666;border-bottom:1px solid #e5e7eb;'>Actions</th></tr></thead><tbody id='table'></tbody></table></div><div style='background:#fff;padding:20px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.1);'><div style='font-size:14px;color:#666;margin-bottom:12px;'>Monitored Zones</div><div id='zones' style='display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:8px;'></div></div></div><script>geotab.addin['f1-ops-hub']=function(){var api,rules=['aFvN_c6L99UKiByXoAduOqQ','alP3sXPbLKkqZg4DobcR6vQ','aG_JyJ332RE6IsnP9Ml6VAg','aNFUEptiFb0qgI-g2Y5iBpAFlamingo','a1nsIVyu55EKkgWYblKLXAg','abgKs_w6WtUSRd4GEQWwtmQ'],zoneNames=['Koval Lane','LV Strip Circuit','Spring Mtn','Flamingo Rd','Harmon Ave','I-15 Impact','Las Vegas Blvd','Grand Prix Plaza','Sands Avenue','Pit Lane'];function pad(n,len){var s=String(n);while(s.length<len)s='0'+s;return s}function countdown(){var d=new Date('Nov 21 2026 22:00:00')-new Date();if(d<0){document.getElementById('cd-d').textContent='000';document.getElementById('cd-h').textContent='00';document.getElementById('cd-m').textContent='00';document.getElementById('cd-s').textContent='00';return}document.getElementById('cd-d').textContent=pad(Math.floor(d/86400000),3);document.getElementById('cd-h').textContent=pad(Math.floor(d%86400000/3600000),2);document.getElementById('cd-m').textContent=pad(Math.floor(d%3600000/60000),2);document.getElementById('cd-s').textContent=pad(Math.floor(d%60000/1000),2)}function renderZones(){var container=document.getElementById('zones');for(var i=0;i<zoneNames.length;i++){var div=document.createElement('div');div.style.cssText='display:flex;align-items:center;gap:6px;padding:8px 12px;background:#f0fdf4;border-radius:6px;font-size:13px;color:#166534;';div.innerHTML='<span style=\"color:#22c55e;\">✓</span>'+zoneNames[i];container.appendChild(div)}}function locate(id){window.parent.location.hash='map,liveVehicleIds:!('+id+')'}function msg(name){window.open('https://wa.me/?text='+encodeURIComponent('ALERT: '+name+' - zone breach detected!'))}function refresh(){api.multiCall([['Get',{typeName:'Device'}],['Get',{typeName:'ExceptionEvent',search:{active:true}}]],function(r){var devs=r[0],evts=r[1],data={'GEN-LV-07':{name:'Mobile Generator - Sector 7',count:1}};for(var i=0;i<evts.length;i++){var e=evts[i];if(rules.indexOf(e.rule.id)>-1){var id=e.device.id;if(!data[id]){var n='Unknown';for(var j=0;j<devs.length;j++)if(devs[j].id===id){n=devs[j].name;break}data[id]={name:n,count:0}}data[id].count++}}var tbl=document.getElementById('table'),ids=Object.keys(data);for(var k=0;k<ids.length;k++){var id=ids[k],d=data[id],row=document.getElementById('row-'+id);if(row){var badge=row.querySelector('.badge');if(badge&&parseInt(badge.textContent)!==d.count)badge.textContent=d.count}else{row=document.createElement('tr');row.id='row-'+id;row.innerHTML='<td style=\"padding:14px 16px;border-bottom:1px solid #e5e7eb;\"><div style=\"font-weight:500;\">'+d.name+'</div><div style=\"font-size:12px;color:#666;\">'+id+'</div></td><td style=\"padding:14px 16px;border-bottom:1px solid #e5e7eb;\"><span class=\"badge\" style=\"background:#fef2f2;color:#dc2626;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:500;\">'+d.count+'</span></td><td style=\"padding:14px 16px;border-bottom:1px solid #e5e7eb;text-align:right;\"></td>';var btns=row.querySelector('td:last-child'),b1=document.createElement('button'),b2=document.createElement('button');b1.textContent='Locate';b1.style.cssText='background:#0066cc;color:#fff;border:none;padding:6px 14px;border-radius:4px;cursor:pointer;margin-right:8px;';b1.onclick=(function(x){return function(){locate(x)}})(id);b2.textContent='WhatsApp';b2.style.cssText='background:#25D366;color:#fff;border:none;padding:6px 14px;border-radius:4px;cursor:pointer;';b2.onclick=(function(x){return function(){msg(x)}})(d.name);btns.appendChild(b1);btns.appendChild(b2);tbl.appendChild(row)}}var existing=tbl.querySelectorAll('tr');for(var m=0;m<existing.length;m++){var rid=existing[m].id.replace('row-','');if(!data[rid])existing[m].remove()}document.getElementById('breachCount').textContent=ids.length;document.getElementById('status').textContent='Live • '+new Date().toLocaleTimeString()})}return{initialize:function(a,s,cb){api=a;renderZones();countdown();setInterval(countdown,1000);refresh();setInterval(refresh,10000);cb()},focus:function(a){api=a;refresh()},blur:function(){}}};console.log('F1 Ops Hub loaded');</script></body></html>"
  }
}
